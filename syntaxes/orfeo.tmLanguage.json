{
    "$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
    "name": "Orfeo",
    "scopeName": "source.orfeo",
    "fileTypes": [ "orfeo" ],
    "patterns": [
        { "include": "#pragma_end"},
        { "include": "#comment_block_#_end" },
        { "include": "#comment_block" },
        { "include": "#comment_line" },
        { "include": "#comment_atomic" }
    ],
    "repository": {
        "pragma_end": {
            "name": "variable.parameter.pragma.end.orfeo",
            "match": "(?<=^\\s*)#_end(?=\\s*$)"
        },
        "comment_block_#_end": {
            "contentName": "comment.block.end.orfeo",
            "begin": "(?<=^\\s*#_end\\s*$)",
            "end": "(?=\\\\Z)"
        },
        "_nested-parentheses": {
            "name": "comment.block.orfeo",
            "begin": "\\(",
            "end": "\\)",
            "patterns": [
                {
                    "include": "#_nested-parentheses"
                }
            ]
        },
        "_nested-pointy-bracket": {
            "name": "comment.block.orfeo",
            "begin": "<",
            "end": ">",
            "patterns": [
                {
                    "include": "#_nested-pointy-bracket"
                }
            ]
        },
        "_nested-square-bracket": {
            "name": "comment.block.orfeo",
            "begin": "\\[",
            "end": "\\]",
            "patterns": [
                {
                    "include": "#_nested-square-bracket"
                }
            ]
        },
        "_nested-curly-bracket": {
            "name": "comment.block.orfeo",
            "begin": "{",
            "end": "}",
            "patterns": [
                {
                    "include": "#_nested-curly-bracket"
                }
            ]
        },
        "_nested-guillemets": {
            "name": "comment.block.orfeo",
            "begin": "«",
            "end": "»",
            "patterns": [
                {
                    "include": "#_nested-guillemets"
                }
            ]
        },
        "_nested-halfwidth-corner-bracket": {
            "name": "comment.block.orfeo",
            "begin": "｢",
            "end": "｣",
            "patterns": [
                {
                    "include": "#_nested-halfwidth-corner-bracket"
                }
            ]
        },
        "comment_block": {
            "patterns": [
                {
                    "name": "comment.block.orfeo",
                    "begin": "#\\\\?\\^*,*\\(",
                    "end": "\\)",
                    "patterns": [
                        {
                            "include": "#_nested-parentheses"
                        }
                    ]
                },
                {
                    "name": "comment.block.orfeo",
                    "begin": "#\\\\?\\^*,*<",
                    "end": ">",
                    "patterns": [
                        {
                            "include": "#_nested-pointy-bracket"
                        }
                    ]
                },
                {
                    "name": "comment.block.orfeo",
                    "begin": "#\\[",
                    "end": "\\]",
                    "patterns": [
                        {
                            "include": "#_nested-square-bracket"
                        }
                    ]
                },
                {
                    "name": "comment.block.orfeo",
                    "begin": "#{",
                    "end": "}",
                    "patterns": [
                        {
                            "include": "#_nested-curly-bracket"
                        }
                    ]
                },
                {
                    "name": "comment.block.orfeo",
                    "begin": "#«",
                    "end": "»",
                    "patterns": [
                        {
                            "include": "#_nested-guillemets"
                        }
                    ]
                },
                {
                    "name": "comment.block.orfeo",
                    "begin": "#｢",
                    "end": "｣",
                    "patterns": [
                        {
                            "include": "#_nested-halfwidth-corner-bracket"
                        }
                    ]
                }
            ]
        },
        "comment_line": {
            "name": "comment.line.number-sign.orfeo",
            "begin": "#\\s|##",
            "end": "(?=$)"
        },
        "comment_atomic": {
            "name": "comment.line.number-sign.atomic.orfeo",
            "match": "(?<=^|[\\s()])#[^\\s()]*(?=[\\s()]|$)"
        }
    }
}
